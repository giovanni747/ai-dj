"use client";

import clsx from "clsx";
import { useState } from "react";

const navItems = {
  "dj": {
    name: "DJ",
  },
  "dashboard": {
    name: "Dashboard",
  },
  "personal": {
    name: "Personal",
  },
};

export type NavTab = "dj" | "dashboard" | "personal";

interface MorphicNavbarProps {
  activeTab?: NavTab;
  onTabChange?: (tab: NavTab) => void;
}

export function MorphicNavbar({ activeTab = "dj", onTabChange }: MorphicNavbarProps) {
  const [localActiveTab, setLocalActiveTab] = useState<NavTab>(activeTab);

  const handleTabClick = (tab: NavTab) => {
    setLocalActiveTab(tab);
    onTabChange?.(tab);
  };

  const currentTab = activeTab || localActiveTab;

  const isActiveLink = (tab: string) => {
    return currentTab === tab;
  };

  return (
    <nav className="mx-auto max-w-4xl px-4 md:px-12 py-2">
      <div className="flex items-center justify-center">
        <div className="bg-white/5 backdrop-blur-xl border border-white/10 flex items-center justify-between overflow-hidden rounded-xl shadow-xl">
          {Object.entries(navItems).map(([tab, { name }], index, array) => {
            const isActive = isActiveLink(tab);
            const isFirst = index === 0;
            const isLast = index === array.length - 1;
            const prevTab = index > 0 ? array[index - 1][0] : null;
            const nextTab =
              index < array.length - 1 ? array[index + 1][0] : null;

            return (
              <button
                onClick={() => handleTabClick(tab as NavTab)}
                className={clsx(
                  "flex items-center justify-center p-1.5 px-4 text-sm text-white/80 transition-all duration-300 cursor-pointer",
                  isActive
                    ? "mx-2 rounded-xl font-semibold text-sm bg-white/10 text-white backdrop-blur-sm"
                    : clsx(
                        "hover:bg-white/5 hover:text-white",
                        (isActiveLink(prevTab || "") || isFirst) &&
                          "rounded-l-xl",
                        (isActiveLink(nextTab || "") || isLast) &&
                          "rounded-r-xl"
                      )
                )}
                key={tab}
              >
                {tab === "dj" ? (
                  <svg 
                    xmlns="http://www.w3.org/2000/svg" 
                    viewBox="0 0 512 512" 
                    className="w-5 h-5"
                    fill="currentColor"
                    aria-label="DJ"
                  >
                    <path d="M500.995,451h-10v-30c0-5.522-4.478-10-10-10h-10c0-22.134-18.005-40.249-40.503-39.988
                      c-16.25-36.425-47.394-63.236-84.68-74.342c0.005-0.074,0.007-0.149,0.011-0.224c19.187-17.444,32.819-39.869,39.836-65.447
                      h15.866c21.764,0,39.47-17.706,39.47-39.47V160.47c0-5.137-1.004-10.163-2.898-14.833c7.835-5.455,12.898-14.526,12.898-24.637V81
                      h50c7.431,0,12.262-7.836,8.944-14.472l-20-40C488.245,23.14,484.783,21,480.995,21h-40c-5.522,0-10,4.478-10,10
                      c0,21.725,0,40.274,0,61.72c-6.748-2.393-14.159-2.301-20.933,0.35C379.659,36.781,320.398,1,255.995,1
                      c-45.84,0-88.344,17.817-120.007,47.626l-16.049-32.097C118.245,13.14,114.783,11,110.995,11h-50c-5.522,0-10,4.478-10,10
                      c0,21.725,0,40.274,0,61.72c-3.13-1.11-6.494-1.72-10-1.72c-16.542,0-30,13.458-30,30s13.458,30,30,30s30-13.458,30-30V71h44.979
                      c-12.651,16.854-22.391,36.174-28.378,57.318c-10.052,7.17-16.601,18.92-16.601,32.151v31.061c0,21.764,17.706,39.47,39.47,39.47
                      h15.847c6.863,25.029,20.299,47.68,39.856,65.463c0.004,0.069,0.006,0.138,0.01,0.207c-37.29,11.106-68.431,37.916-84.68,74.343
                      c-22.445-0.261-40.503,17.89-40.503,39.987h-10c-5.522,0-10,4.478-10,10v30h-10c-5.522,0-10,4.478-10,10v40
                      c0,5.522,4.478,10,10,10h490c5.522,0,10-4.478,10-10v-40C510.995,455.478,506.517,451,500.995,451z M450.995,411h-40
                      c0-9.345,6.34-17.347,15.494-19.479C438.742,388.569,450.995,397.979,450.995,411z M322.303,313.528
                      C313.022,341.074,287.129,361,255.995,361c-31.176,0-57.019-19.956-66.298-47.454
                      C230.731,336.925,281.505,336.753,322.303,313.528z M420.995,191.53c0,10.735-8.734,19.47-19.47,19.47h-11.823
                      c1.874-14.386,1.117-23.526,1.292-35c0-11.292-1.441-23.161-4.609-34.997c6.276-0.001,10.001-0.007,12.283-0.008
                      c5.154,5.738,12.326,9.267,19.797,9.909c1.637,2.897,2.529,6.179,2.529,9.565V191.53z M255.995,21
                      c58.605,0,112.414,33.46,138.63,85.71c-2.406,4.437-3.611,9.359-3.613,14.294c-3.027,0.003-6.85,0.005-11.696,0.001
                      c-9.79-21.973-25.48-41.352-46.1-55.754c-46.592-32.543-108.397-32.163-154.443,0C158.001,79.761,142.402,99.191,132.68,121
                      h-21.62C133.672,61.361,191.057,21,255.995,21z M110.465,211c-10.735,0-19.47-8.734-19.47-19.47V160.47
                      c0-10.611,8.586-19.47,19.47-19.47h15.128c-1.624,6.066-2.825,12.219-3.572,18.315c-1.523,12.434-0.867,19.939-1.026,31.685
                      c0,6.75,0.438,13.429,1.294,20H110.465z M140.995,191v-15c0-2.332,0.077-4.643,0.214-6.937
                      c20.198-3.526,38.242-11.849,53.725-24.815c8.944-7.488,21.906-6.902,30.152,1.365c18.558,18.598,41.804,29.285,67.87,24.072
                      c5.606-1.121,9.122-6.702,7.74-12.231l-4.4-17.602c16.813,8.302,42.766,18.933,74.12,24.558c0.888,8.881,0.468,13.8,0.579,26.59
                      c0,35.593-13.821,69.653-41.479,93.184c-42.257,35.842-104.931,35.713-147.032,0.01C154.926,260.746,140.995,226.754,140.995,191z
                       M169.691,316.527c4.912,16.615,14.546,31.516,27.797,42.862c33.611,28.779,83.344,28.831,117.016,0
                      c13.232-11.33,22.88-26.225,27.798-42.862c29.908,9.563,54.852,31.037,68.639,59.847c-11.821,6.823-19.945,19.539-19.945,34.626
                      h-30c-5.522,0-10,4.478-10,10v30h-190v-30c0-5.522-4.478-10-10-10h-30c0-14.875-8.074-27.71-19.956-34.604
                      C114.842,347.531,139.814,326.081,169.691,316.527z M80.995,391c10.951,0,20,8.87,20,20h-40C60.995,399.972,69.967,391,80.995,391
                      z M490.995,491h-470v-20h470V491z" />
                    <path d="M291.347 258.071c3.905-3.905 3.905-10.237 0-14.143-3.906-3.904-10.236-3.904-14.143 0-11.695 11.695-30.723 11.695-42.418 0-3.906-3.904-10.236-3.904-14.143 0-3.905 3.905-3.905 10.237 0 14.143C240.138 277.564 271.853 277.563 291.347 258.071zM255.995 431c5.522 0 10-4.478 10-10v-10c0-5.522-4.478-10-10-10s-10 4.478-10 10v10C245.995 426.522 250.473 431 255.995 431z" />
                  </svg>
                ) : tab === "dashboard" ? (
                  <svg 
                    xmlns="http://www.w3.org/2000/svg" 
                    fill="none" 
                    viewBox="0 0 24 24" 
                    strokeWidth={1.5} 
                    stroke="currentColor" 
                    className="w-5 h-5"
                    aria-label="Dashboard"
                  >
                    <path 
                      strokeLinecap="round" 
                      strokeLinejoin="round" 
                      d="M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6a2.25 2.25 0 0 1-2.25-2.25V6ZM3.75 15.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 18v-2.25ZM13.5 6a2.25 2.25 0 0 1 2.25-2.25H18A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25a2.25 2.25 0 0 1-2.25-2.25V6ZM13.5 15.75a2.25 2.25 0 0 1 2.25-2.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18v-2.25Z" 
                    />
                  </svg>
                ) : tab === "personal" ? (
                  <svg 
                    xmlns="http://www.w3.org/2000/svg" 
                    viewBox="0 0 16 16" 
                    className="w-5 h-5"
                    fill="currentColor"
                    aria-label="Personal"
                  >
                    <path d="M14.2 16h.6v-.6l-.6.6zM8.6 13.9c-.7-.7-1-1.8-.8-2.8S8.6 9.3 9.5 9c0-.1-.1-.2-.1-.2 0-.6.8-.4 1.4-1.5 0 0 2.7-7.3-2.9-7.3-5.5 0-2.8 7.3-2.8 7.3.6 1 1.4.8 1.4 1.5s-.7.7-1.4.8C4 9.7 3 9.5 2 11.3c-.6 1.1-.9 4.7-.9 4.7h9.6l-2.1-2.1z" />
                    <path d="M14.9 10.1c-.2-.1-.5-.1-.7-.1-.7 0-1.3.6-1.7 1.1-.4-.5-1-1.1-1.7-1.1-.3 0-.5 0-.7.1-1.2.4-1.4 2-.5 2.9l3 2.9 3-2.9c.8-.9.5-2.5-.7-2.9z" />
                  </svg>
                ) : (
                  name
                )}
              </button>
            );
          })}
        </div>
      </div>
    </nav>
  );
}

export default MorphicNavbar;
